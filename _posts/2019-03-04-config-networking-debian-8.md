---
layout: post
title: Debian 8 修改本机dns地址
category: tech
tags: network linux
---

![](https://cdn.kelu.org/blog/tags/network.jpg)

最近架设了自用的dns服务器，修改本机的 /etc/resolv.conf 实际上并不生效，解决办法如下：

1. 查看 /etc/resolv.conf 文件头部 



先说说为什么/etc/resolv.conf每次重启会清理掉，通过ls -l 查看，会发现resolv.conf只是一个软链接文件，源文件位于/run/resolvconf/resolv.conf ，查看该文件会发现如下两条注释：

```
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
```

上面已经说的非常清晰明了了。

解决方法

方法一：

/etc/network/interfaces中添加一行DNS信息

```
dns-nameservers 8.8.8.8
```

方法二：

编辑/etc/resolvconf/resolv.conf.d/base文件，加入DNS信息

```
nameserver 8.8.8.8
```

方法三：

编辑/etc/resolvconf/resolv.conf.d/head 文件，在其中加入DNS信息

```
nameserver 8.8.8.8
```

注：此方法虽然有用但不推荐，因为该文件中，同样有警告信息。

增加完DNS信息后，执行下面的命令生效

```
resolvconf  -u
service networking restart
```

执行完该命令后，查看/etc/resovle.conf文件，会发现其DNS信息，就是我们刚刚在方法一或方法二中写的DNS信息。

