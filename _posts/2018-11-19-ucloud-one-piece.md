---
layout: post
title: UCloud 的大航海时代 - 史中 浅黑科技
category: product
tags: cloud
---

**![img](https://cdn.kelu.org/blog/2018/11/640-19.gif)**

> 颇有收藏价值，转来小站时时瞻仰。原文链接：<https://mp.weixin.qq.com/s/utczhsy1vu234LQU4Hl9Nw>

历史属于郑和，但历史更属于哥伦布。

> 郑和的二百艘船上，载着永乐帝的千秋霸业，载着郑和的真主和麦加，载着明朝政府的海路商业野心，载着水手们加官进爵的美梦。
>
> 哥伦布的三艘船上，只有一群寻宝的探险家。

历史给了他们不同的境遇，它向简单的人微笑，向复杂的人怒目。这次选择，最终写进了课本，给了中国人一场绵延六百年的“核心记忆”。

日光之下并无新事。直到今天，那些撑起几叶扁舟远行的人们，仍在得到历史奖赏，改变着站在此岸眺望的中国人。

最近，中哥认识了一位新胖友，他叫谢乐冰，是云计算厂商 UCloud 出海商务拓展总监。和他聊过之后，我突然发现：UCloud 的出海，大抵也是如此。

**这是属于“一小群人”的“大航海时代”。**

![img](https://cdn.kelu.org/blog/2018/11/640-192.webp.jpg)

**1、“草根出海”要用神马姿势？**

2012年，季昕华和在腾讯共事多年的老友莫显峰、华琨共同创建了 UCloud。

虽然距今只有六年多，但那已算得上是**云计算的“上古时代”。**2012年的世界，大概是这样的：

> 互联网巨头纷纷开始开发自己的云计算。但对于 BAT 来说，他们几乎同时经历着十五年来最大的爆发期。开发云计算的最主要目的，就是满足自己对“算力”日益增长的渴求。简单来说，他们最大的客户就是自己。
>
> 像 UCloud 这样纯第三方的云计算公司，他们所有的“算力”都只有一个用途——卖出去。

所以，2012 年谢乐冰还在一家游戏公司，想了半天他还是觉得：那时 UCloud 虽然很稚嫩，但“好像没什么对手”。

彼时云计算的市场也小，随便拉住一个 IT 创业大佬，他都未必能讲清楚云计算到底有啥用。不过，有一个行业对云计算是天然敏感的，那就是“游戏”。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607176028.webp.jpg)

**创业初期的季昕华**

> 由于创始人团队腾讯、盛大的背景，UCloud 从一开始就瞄准了游戏市场。至少在创业的前三年，UCloud 的命运都是和中国游戏产业“绑”在一起的。
>
> 有趣的事情来了，如果让中国互联网各个行业组成一个班级的话，游戏一定是那个最不安分的童鞋，这家初创云计算厂商，就这样被小伙伴半推半就地拽上了探险之路。

浅友们可以回想一下，当时正是手游爆发的季节，《三国来了》《刀塔传奇》《放开那三国》《大掌门》《我叫 MT》一个接一个地火爆。

但实际上，游戏这个行业是典型的“一将功成万骨枯”，一个火爆的游戏脚下，肯定踩着一百个无人知晓游戏的死尸。

从游戏开发者的角度来看，这颇有些赌命的意味。**一个手游开发周期要半年，如果成功就黄袍加身，如果失败就大海石沉。**每当捏着一把汗看到自己的游戏无人问津的时候，开发者的心里就会想：糟了，是心肌梗死的感觉。。。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607308651.webp.jpg)

所以，手游开发者对成本特别敏感。

员工的工资不能减（否则要造反），游戏的品质不能牺牲（否则没人玩），看来看去只有从计算资源上节省成本。所以手游选择不自购服务器，而是租用云计算，应该算是“自己找轮椅”了。

命也该然，UCloud 搭上的手游这么一趟车，越跑越快。

在谢乐冰的记忆里，2014 年“风向”突然发生了变化。

> **本来中国手游的创业者里就有很大一部分“海归”，中国市场相对成熟之后，他们又发现了一个“致富经”，就是把中国的手游输出到海外去。**

他说。

接下来两三年，陆续有用户找到 UCloud，劈头就问，你们在海外有数据中心吗？

UCloud 的人知道，自己是纯粹的第三方云计算厂商。这意味着，用户就是百分百的衣食父母，对方无论要什么姿势都要尽量给。。。

虽然 UCloud 已经尝试在中国香港和美国洛杉矶等地零星建立了几个数据中心，但这毕竟太少，不一定运气那么好正好是客户需要的。于是，负责客户的同学颤抖地问：你要哪儿的数据中心？

对方答：中国台湾。

UCloud 同学咬咬牙，说：没问题！你等我！

这就是 UCloud 出海的最初情形。

![img](data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==)

**2、海外拓荒炒鸡凶险，家里得有点“黑科技”**

为什么中国大陆的手游要去中国台湾？

这里涉及到手游/中国软件出海的几条经典路径：

> 1、直接跨越大洋落地欧美日韩。但由于对方是非常成熟的市场，已经有一套自己的文化，从而所有游戏的设计风格和操作习惯都要为欧美日韩定制。
>
> 2、切入没有文化相似性的邻国。例如印度、中东。之所以会向这些国家进发，主要是因为“中国制造”在当地受欢迎，中国人认为那里同样应该存在互联网的市场机会。但从结果来看，这条路比较艰难。
>
> 3、在中华文化圈中渗透。这是三条路径里最为经典的一个。顺序是：大陆--中国香港--中国台湾--新加坡--马来西亚、印度尼西亚、泰国、菲律宾、越南等等。由于文化的相似性，出海的成功率最高。

一款中国手游的生命通常是这样：

**在大陆火爆，然后火速移植到港台试水，如果不行就洗洗睡，如果同样火爆就马上进军东南亚。如果在东南亚仍然大火，基本可以断定，游戏公司会赚得盆满钵满。**

![img](https://cdn.kelu.org/blog/2018/11/640-1542607317244.webp.jpg)

**中国互联网出海**

**一条标准路径**

可能有浅友会问，为什么游戏进中国台湾，服务器也必须进中国台湾呢？

这里简单科普一下。台湾地区对互联网业务有严格的限制：凡是在本岛提供服务的业务，数据不能离岛。

这种数据安全政策在很多地区也存在，所以海外机房不仅是为了保证云计算的效果，还有一个重要的因素就是合规性。

说回 UCloud，当时客户“要去中国台湾”的要求很快反映到了高层，于是一支建设台湾高雄机房的队伍马上出发。

几个月以后，高雄数据中心落成。

而就在这几个月间，想去中国台湾的客户又多了很多。UCloud 为自己的远见和开拓精神深深自豪。于是，半年之后又建立了台北数据中心。

到现在为止，海外数据中心的建设算是一帆风顺。这就像哥伦布刚登上西印度群岛时风光旖旎，直到树丛里杀出了印第安人。。。

在台北数据中心，某个游戏上线的下一秒，就遭到了巨量的 DDoS 攻击。数据接口瞬间被垃圾流量堵死，游戏没办法访问。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607322442.webp.jpg)

**红色的垃圾流量堵满接口**

**绿色的正常流量就被弹出了**

同事们都觉得这不用慌，UCloud 的专业就是云计算，对于 DDoS 的安全防护措施显然是提前布置好的。

实际上，在开服之前，UCloud 就已经应游戏方要求，上线了一个国际知名厂商的防护系统。他们检查了一下，之所以没有起作用，是因为有些地方配置错误，需要紧急调整。

然而，当他们联系安全服务商的时候，发现居然和对方有时差，半天才收到回信。按照这种效率，也许等对方修复好，已经一天过去了。。。这个情况一下子超出了 UCloud 童鞋的经验，有点方。

危急时刻，求人不如求己。

工程师赶紧开会，想出了一个妙计：把流量引到 UCloud 香港机房，用香港机房的清洗设备之后，再把干净的流量导回台北机房。就这样，忙了几个小时，可算是让游戏恢复了正常。再看工程师，各个都被汗水湿透了衬衫。。。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607325030.webp.jpg)

**把清洗之后的流量引回台北**

谢乐冰当时虽然肉身不在台北机房，却仍然对那次全公司总动员记忆深刻。

他给我回忆的，其实并不是一次紧急事故的处理，而是**一群水手在未知的海岸停靠之后，发现既有的世界观和经验完全失效，而又难以预料对手究竟有多强大时，那种命悬一线的无助感。**

“宝岛一役”，让 UCloud 上上下下明白了一件事：

> 离开熟悉的土地哪怕一步，都是踏进了互联网的未知地带。这和当年哥伦布踏上美洲别无二致。**在“法外之地”上，如果想要把控局势，就必须从家里带足最强的武器。**

某种程度上，这成为了未来数年 UCloud 出海的钢铁信条。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607327295.webp.jpg)

还拿“抗 DDoS”这件事来说。

从几年前开始，“本地机房被攻击，就从相邻机房拐个弯儿”这种骚操作成为了标准解决方案。

但这还不够，黑科技就要来了。

这套方案不断发展。最近两年，UCloud 全球28个机房，每一个都自建了流量清洗能力，这些机房连接起来就可以搞出一套“骚操作”——根据攻击者的来源自动调度，就近清洗。

> 比如我们可以把东南亚的流量，直接在东南亚的机房清洗，把欧洲的流量，直接在欧洲机房清洗，洗干净之后再把剩余的正常用户访问给到应该给的那台服务器。
>
> 而且，如果这次攻击很严重，主要的“肉鸡”又都在美国，我们就可以把美国的服务器暂时断掉，以保证其他地方的用户能正常登录。

他说。

可能有童鞋没看明白，中哥简单解释一下：

> 这就像幼儿园的老师，为了维护秩序，把满操场的小朋友带到不同的教室里，分别在每个教室里“控制”住不听话的熊小孩，然后再把乖宝宝重新放到操场上玩；
>
> 大多数同学都是“熊孩子”，那就索性这一个班都不要出去玩了。。。

这就是被称作 Anycast 的流量调度技术。

> 虽然 Anycast 技术在很多领域都有应用，但布置在全球范围的云服务里，确实有很多技术挑战。不过，既然要服务好客户，我们就得搞出这样一套一套的黑科技。。。

谢乐冰说。

以中国高雄和中国台北为范本，UCloud 在手游出海的路径上，分别建立了新加坡、雅加达、曼⾕、孟买等等数据中心，算是把这条路跑通了。只要你有出海的计划，那么从咨询到部署，都是一对一的服务，这成了 UCloud 别致的“特色服务”。

如果你了解“黑暗丛林”有多凶险，就会明白“贴身保护”有多么重要。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607330972.gif)

![img](https://cdn.kelu.org/blog/2018/11/640-1542607332934.gif)

**3、“娘家人”的自我修养**

从 2016 年开始，出海大军变得浩浩荡荡。

除了“老熟人”游戏之外，电商、社交、直播、金融科技、智能硬件也开始用 UCloud 作为“胯下白龙驹”大面积出海。谢乐冰挺有信心，他觉得有了游戏的几年磨练，这个时候 UCloud 已经是个“出海老司机”了。

> 实际上，无论哪个行业，出海的路径和游戏都是极其类似的，都要先从和中国文化类似的国家和地区试水，然后再去更远的地方落地。

看着全球 AppStore 排行榜上名列前茅的中国应用软件都在用自己家的云出海，谢乐冰和很多 UCloud 同事都觉得，自己像个“娘家人”。

娘家人，最爱说的就是“别怕，有你二姨在，谁都不敢动你！！”对自己家的姑娘有一种“混不吝”的袒护。

**但是，孤胆深入海外的中国企业，需要的正是这种坚定的安全感。**

> 无论人家买的数据中心在南美还是在非洲，我们都得让他和在中国使用云计算有一模一样的体验。
>
> 包括稳定性，包括计算能力和网络速度，也包括客服的质量。

谢乐冰说。

不过，古语有云：人生最大的挑战是把吹出去的NB实现。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607335474.webp.jpg)

说来就来，果然有中国企业要去**非洲**：

2018年，UCloud 的几个客户提出，要去非洲尼日利亚开展业务。于是，机房建设“先遣队”直接一猛子扎到了大草原上。

由于这是第一次把数据中心建到非洲，“先遣队”特意提前联系了好几个当地的机房，确定符合自己的技术指标才亲自去调查。结果到了当地一看，有些所谓的顶级“三类机房”，一个月停电三回，都是靠发电机来续命。再看当地的运营商，标注带宽和实际带宽简直就是卖家秀和买家秀的差别。。。

最后，UCloud 只能选择这个国家最大的机房和最大的国有电信运营商，才达到了技术指标。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607338252.webp.jpg)

**UCloud 在尼日利亚的**

**拉各斯机房**

> 这给了我们经验，之后我们进入一些亚非拉国家的时候，干脆直接选择最大的国有运营商和机房就对了。

然而，即使这样，也不能百分之百避免中国的用户在海外“受委屈”。因为毕竟机房建设在亚非拉国家，网络抖动、不同运营商之间的兼容问题时有发生。

底层网络和硬件已经尽力了，接下来只能靠技术上的方法。

一个有趣的技术是：

> 如果在一个陌生的地区建设机房，可以先建设一个小规模的云，如果用户在这个国家的生意越做越大，就可以在不影响原有云运行的同时扩大云的规模。这就像盖一栋大楼，先盖一层，等到需要的时候再盖第二层，如此类推，既节省成本，又保证云的质量。

这被称为“灵活架构”。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607340406.gif)

**灵活架构**

**大概就像个可拼插的积木**

一个技术还不够。

> 如果某个海外接入点发生故障，系统就会自动算出一个新的线路，然后作为配置文件下发给系统，于是流量就会跑到一个新的线路上。这就好像你熟悉的“自动导航系统”，一条路线走不通，导航就自动给你算出另一条绕行路线，总之不会让你回不到家。

这被称为“自愈能力”。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607342267.gif)

**自愈能力**

**大概就像随时调整的导航**

另外还有一种很特别的技术。

> 很多互联网服务对时延的要求很高，需要专线。原本的技术是需要从云厂商专门买一条固定的专线。但是 UCloud 会实时匹配一条当时最合适的加速线路。

这被称为“Path X”。

凡此种种黑科技，不一而足。

> 我们是吃过时差的亏的。所以现在无论人家什么时候联系我们，接电话的一定不是传话的客服，而是是我们一线的技术人员，而且，无论在哪个地区，无论几点，都能马上联系到我们中国的同事。

他说。

做到这样，UCloud 应该算是“管得多”，“想得细”，仁至义尽的“娘家人”了，不过谢乐冰告诉我，这还不够极致。

说到这，他又给我讲了一段往事。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607345250.webp.jpg)

就在2018年夏天，世界杯开幕前一个月，有一个客户突然提出，要去巴西转播世界杯。而且，显然，业务在世界杯开幕前必须 Ready。

这就很不科学了啊。

一个月时间，要把机房位置选好，把电信运营商敲定，把服务器从中国运到巴西，然后在当地配置云计算系统，把用户的系统布置在云计算上。这简直可以当做一个笑话听了。

然而， UCloud 听了用户的时间表，这个任务居然接了。。。

> 我们的队伍紧急出动，一边找机房，一边把服务器运到南美，然而，当我们把设备放到机房的时候，离世界杯开幕只有几天了。
>
> 这几天用来配置云平台，显然是不够了。于是我们搞了一批物理机，让客户的业务先在物理机上跑，确保世界杯之前上线，然后再迁移到云平台上。这相当于我给你的房子没建好，先给你旅馆住。
>
> 果然，一切顺利，世界杯前两三天，客户的转播业务顺利跑起来了。

他回忆。

实际上，业内建设一个机房，流程一般是“规划半年，建设半年”。像 UCloud 这样跟打仗一样，1-3个月就建设一个机房的云计算厂商，确实有种“海盗”的风范。

> **这方面我们得做到，因为“灵活”才是我们的特点。**
>
> 互联网讲的就是快速试错、快速迭代、快速扩张。有时候，迟一个月上线，就会影响一个项目的成败，这可不是儿戏。我们承诺了帮中国企业在海外快速落地，如果不能百分之百做到，那我们算什么娘家人？

他说。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607347556.webp.jpg)

**目前 UCloud 分布在全球的28个机房**

**（点鸡可看大图）**

**4、这也许是“一小群人”的“大航海时代”**

谢乐冰给我一些数据：

> UCloud 目前有8万多个⽤户，包括⾹港绿洲、紫龙游戏、宝宝巴⼠、快看漫画、微鲸科技、探探、Blued、什么值得买、前隆科技、心动网络等等。
>
> 所有公司部署在 UCloud 上的业务总产值大概千亿人民币。
>
> 间接服务⽤户数量超过10亿。

这个数据和巨头阿里云当然还有差距，但是作为一支中国企业出海搭乘的“舰队”，他们做得认真而快乐。

“自己动手，丰衣足食。”这是他总结的 UCloud 出海的价值观。

> 如果一切都铺平垫稳，不需要靠智慧和灵活性解决，大家都拼资源和规模，那也许就没有我们的机会了。

他说。

实际上，出海这两个字背后，意味着大千世界。有伊斯兰国家，有君主制国家，有财阀垄断国家，有新兴的年轻社会，也有在困境中艰难跋涉的社会。

这种未知，比一般人想象中更为凌厉。

这种未知，也恰恰意味着新的生存空间。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607349588.webp.jpg)

**May Flower**

**五月花号**

中国企业出海，虽然是30年来我们一直在做的事情。但是对于普通人来说，这仍然是个新奇而又振奋的话题。

过去，中国的国有企业是出海的主力，而新兴互联网企业的出海，直到最近几年才声势渐壮。

对于每个人来说，我们都正在亲历历史。

而对于中国企业的“娘家人” UCloud 来说，他们有资本骄傲。因为在他们手下，诞生了一批又一批在海外站稳脚跟的中国企业。

告别谢乐冰，我一直在问自己，**为什么 UCloud 如此执着于中国企业出海？**

后来，我大概明白了，这就和询问哥伦布“为什么执着于发现美洲新大陆”一样。

> 曾经有人问登山者，你为什么登山？
>
> 他回答：因为山在那里。

我记得，2015 年的时候我第一次见到季昕华，他告诉我：善泳者溺，善战者死。现在回望，这似乎确实是他一直遵守的信条。

在国内 BATH 争夺云计算霸主的时候，UCloud 显得冷静而又执拗。他们只是安静地修补自己的帆，准备下一次出海远行。

远行的人永远是少数，这也正是远行的魅力。

他们不是传教士，也不是天朝上国的使臣，他们也许只是一小群喜欢探险的人，在期待世界奖赏的同时，创造着自己的大航海时代。

![img](https://cdn.kelu.org/blog/2018/11/640-1542607352235.webp.jpg)